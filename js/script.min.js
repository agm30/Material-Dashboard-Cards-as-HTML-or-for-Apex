var materialCards=function(){"use strict";return{initialize:function(e,a,t,r,i,s){function c(){try{apex.util.showSpinner(o)}catch(a){var t=$("<span></span>");t.attr("id","loader"+e),t.addClass("ct-loader fa-stack fa-3x");var r=$("<i></i>");r.addClass("fa fa-circle fa-stack-2x"),r.css("color","rgba(121,121,121,0.6)");var i=$("<i></i>");i.addClass("fa fa-refresh fa-spin fa-inverse fa-stack-1x"),i.css("animation-duration","1.8s"),t.append(r),t.append(i),o.append(t)}}function p(){}function A(e){o.empty();var a=_(o);e.row&&e.row.length>0?D(a,e.row,d):(o.css("min-height",""),a.append('<div class="s-g-col-12">'+t+"</div>"))}function R(e){var a=$("<div></div>");return a.addClass("s-g-container"),a.css("min-height","170px"),e.append(a),a}function _(e){var a=$("<div></div>");return a.addClass("s-g-row"),e.append(a),a}function f(){if(a)c(),apex.server.plugin(a,{pageItems:i},{success:A,error:function(e){o.empty(),console.log(e.responseText),o.append("<span>Error occured please check console for more information</span>")},dataType:"json"});else try{c(),setTimeout(function(){A(dataJSON)},500)}catch(e){console.log("need data json"),console.log(e)}}function D(e,a,t){a&&a.length>0&&($.each(a,function(a,r){r.CARD_TYPE?"icon"===r.CARD_TYPE.toLowerCase()?h(a,e,r,t):v(a,e,r,t,r.CARD_CHART_CONFIG):h(a,e,r,t)}),p())}function h(e,a,t,r){var i="background: linear-gradient(60deg, hsl("+23*e%350+", 55%, 60%), hsl("+23*e%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",s=$("<div></div>");s.addClass("s-g-col-"+r.cardWidth);var n=$("<div></div>");n.addClass("at-card at-card-stats");var d=$("<div></div>");if(d.addClass("card-header"),t.CARD_ICON){var l=$("<i></i>");l.addClass("fa "+t.CARD_ICON);var o=void 0!=t.CARD_ICON_COLOR&&t.CARD_ICON_COLOR.length>0?t.CARD_ICON_COLOR:"white";l.attr("style","color:"+o),d.append(l)}d.attr("style",t.CARD_HEADER_STYLE||i),n.append(d);var C=$("<div></div>");C.addClass("card-content");var c=void 0!=t.CARD_TITLE?t.CARD_TITLE:"";C.append('<p class="category">'+c+"</p>");var p=void 0!=t.CARD_VALUE?t.CARD_VALUE:"";C.append('<h2 class="title">'+p+"</h2>"),n.append(C);var A=$("<div></div>");A.addClass("card-footer");var R=$("<div></div>");if(t.CARD_FOOTER&&(R=$("<div></div>"),R.addClass("stats"),R.append(t.CARD_FOOTER)),A.append(R),n.append(A),s.append(n),t.CARD_LINK){var _=$("<a></a>");_.attr("href",t.CARD_LINK),_.append(s),a.append(_)}else a.append(s)}function v(a,t,r,i,s){var n="background: linear-gradient(60deg, hsl("+23*a%350+", 55%, 60%), hsl("+23*a%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",d={fullWidth:!0,chartPadding:{bottom:-12,top:28,right:30,left:-5}},l={};if(s&&"string"==typeof s)try{l=JSON.parse(s)}catch(o){console.log("Error while try to parse CARD_CHART_CONFIG: "+o+s)}else l=s;$.extend(!0,d,l);var C="ct-chart-"+e+a,c=$("<div></div>");c.addClass("s-g-col-"+i.cardWidth);var p=$("<div></div>");p.addClass("at-card");var A=$("<div></div>");A.addClass("card-header card-chart"),A.attr("style",r.CARD_HEADER_STYLE||n);var R=$("<div></div>");R.addClass("ct-chart"),R.attr("id",C),A.append(R),p.append(A);var _=$("<div></div>");_.addClass("card-content");var f=void 0!=r.CARD_TITLE&&r.CARD_TITLE.length>0?r.CARD_TITLE:"";_.append('<p class="category">'+f+"</p>");var D=void 0!=r.CARD_VALUE&&r.CARD_VALUE.length>0?r.CARD_VALUE:"-";_.append('<h2 class="title">'+D+"</h2>"),p.append(_);var h=$("<div></div>");h.addClass("card-footer");var v=$("<div></div>");if(r.CARD_FOOTER&&(v=$("<div></div>"),v.addClass("stats"),v.append(r.CARD_FOOTER)),h.append(v),p.append(h),c.append(p),r.CARD_LINK){var T=$("<a></a>");T.attr("href",r.CARD_LINK),T.append(c),t.append(T)}else t.append(c);var g;if(r.CARD_CHART_DATA){var u={};if("string"==typeof r.CARD_CHART_DATA)try{u=JSON.parse(r.CARD_CHART_DATA)}catch(o){console.log("Error while try to parse CARD_CHART_DATA"),console.log(o),console.log(r.CARD_CHART_DATA)}else u=r.CARD_CHART_DATA;switch(r.CARD_TYPE.toLowerCase()){case"chart-line":g=new Chartist.Line("#"+C,u,d);break;case"chart-bar":g=new Chartist.Bar("#"+C,u,d);break;case"chart-pie":d.chartPadding={},g=new Chartist.Pie("#"+C,u,d);break;default:console.log("No valid Chart type")}var O=void 0!=r.CARD_ICON_COLOR&&r.CARD_ICON_COLOR.length>0?r.CARD_ICON_COLOR:"white";g.on("draw",function(e){var a={};if(r.CARD_CHART_DATA&&"string"==typeof r.CARD_CHART_DATA)try{a=JSON.parse(r.CARD_CHART_DATA)}catch(t){console.log("Error while try to parse CARD_CHART_CONFIG: "+t+s)}else a=r.CARD_CHART_DATA;a.colors&&(O=a.colors[e.index]||a.colors[0]),("bar"===e.type||"line"===e.type||"point"===e.type)&&(d.strokeWidth?e.element.attr({style:"stroke:  "+O+"; stroke-width:"+d.strokeWidth+"px;"}):e.element.attr({style:"stroke:  "+O})),"slice"===e.type&&e.element.attr({style:"fill: "+O+"; fill-opacity: "+(a.colors?.6:(e.index%10+2)/10)}),"area"===e.type&&e.element.attr({style:"fill: "+O+"; fill-opacity: "+(e.index%10+2)/10}),d.donut===!0&&(d.sliceWidth&&$(R).find(".ct-slice-donut").css("stroke-width",d.sliceWidth.toString()+"px"),e.element.attr({style:"stroke-opacity: "+(-e.index%10+10)/10+"; stroke:  "+O+";"}),$(R).find(".ct-label").css("stroke","initial"),$(R).find(".ct-label").css("fill",O)),$(R).find(".ct-slice-pie").attr("stroke",a.colors?"rgba(0,0,0,0)":O),$(R).find(".ct-slice-donut").attr("stroke",O),$(R).find(".ct-label").css("color",a.colors?"white":O),$(R).find(".ct-grid").css("stroke",a.colors?"white":O),$(R).find(".ct-grid").css("opacity",".4")})}}var n={cardWidth:4,refresh:0},d={},l=$("#"+e);if(l.length>0){var o=R(l);if("string"==typeof r)try{d=JSON.parse(r)}catch(C){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(C),console.log(r),d={}}else d=r;try{d=$.extend(!0,n,d)}catch(C){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(C),d=n,console.log(d)}f();try{apex.jQuery("#"+s).bind("apexrefresh",function(){0==o.children("span").length&&f()})}catch(C){console.log("Can't bind refresh event on "+s+". Apex is missing"),console.log(C)}d.refresh>0&&setInterval(function(){0==o.children("span").length&&f()},1e3*d.refresh)}else console.log("Can't find parentID: "+e)}}}();