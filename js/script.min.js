var materialCards=function(){"use strict";return{initialize:function(a,e,r,t,n,d){function p(){try{apex.util.showSpinner(l)}catch(e){var r=$("<span></span>");r.attr("id","loader"+a),r.addClass("ct-loader fa-stack fa-3x");var t=$("<i></i>");t.addClass("fa fa-circle fa-stack-2x"),t.css("color","rgba(121,121,121,0.6)");var n=$("<i></i>");n.addClass("fa fa-refresh fa-spin fa-inverse fa-stack-1x"),n.css("animation-duration","1.8s"),r.append(t),r.append(n),l.append(r)}}function C(){}function f(a){l.empty();var e=h(l);a.row&&a.row.length>0?A(e,a.row,s):(l.css("min-height",""),e.append('<div class="s-g-col-12">'+r+"</div>"))}function v(a){var e=$("<div></div>");return e.addClass("s-g-container"),e.css("min-height","170px"),a.append(e),e}function h(a){var e=$("<div></div>");return e.addClass("s-g-row"),a.append(e),e}function g(){if(e)p(),apex.server.plugin(e,{pageItems:n},{success:f,error:function(a){l.empty(),console.log(a.responseText),l.append("<span>Error occured please check console for more information</span>")},dataType:"json"});else try{p(),setTimeout(function(){f(dataJSON)},500)}catch(a){console.log("need data json"),console.log(a)}}function A(a,e,r){e&&e.length>0&&($.each(e,function(e,t){t.CARD_TYPE?"icon"===t.CARD_TYPE.toLowerCase()?R(e,a,t,r):_(e,a,t,r,t.CARD_CHART_CONFIG):R(e,a,t,r)}),C())}function R(a,e,r,t){var n="background: linear-gradient(60deg, hsl("+23*a%350+", 55%, 60%), hsl("+23*a%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",d=$("<div></div>");d.addClass("s-g-col-"+t.cardWidth);var i=$("<div></div>");i.addClass("at-card at-card-stats");var s=$("<div></div>");if(s.addClass("card-header"),r.CARD_ICON){var o=$("<i></i>");o.addClass("fa "+r.CARD_ICON);var l=void 0!=r.CARD_ICON_COLOR&&r.CARD_ICON_COLOR.length>0?r.CARD_ICON_COLOR:"white";o.attr("style","color:"+l),s.append(o)}s.attr("style",r.CARD_HEADER_STYLE||n),i.append(s);var c=$("<div></div>");c.addClass("card-content");var p=void 0!=r.CARD_TITLE?r.CARD_TITLE:"";c.append('<p class="category">'+p+"</p>");var C=void 0!=r.CARD_VALUE?r.CARD_VALUE:"";c.append('<h2 class="title">'+C+"</h2>"),i.append(c);var f=$("<div></div>");f.addClass("card-footer");var v=$("<div></div>");if(r.CARD_FOOTER&&(v=$("<div></div>"),v.addClass("stats"),v.append(r.CARD_FOOTER)),f.append(v),i.append(f),d.append(i),r.CARD_LINK){var h=$("<a></a>");h.attr("href",r.CARD_LINK),h.append(d),e.append(h)}else e.append(d)}function _(e,r,t,n,d){var i="background: linear-gradient(60deg, hsl("+23*e%350+", 55%, 60%), hsl("+23*e%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",s={fullWidth:!0,chartPadding:{bottom:-12,top:28,right:30,left:-5}},o={};if(d&&"string"==typeof d)try{o=JSON.parse(d)}catch(l){console.log("Error while try to parse CARD_CHART_CONFIG: "+l+d)}else o=d;$.extend(!0,s,o);var c="ct-chart-"+a+e,p=$("<div></div>");p.addClass("s-g-col-"+n.cardWidth);var C=$("<div></div>");C.addClass("at-card");var f=$("<div></div>");f.addClass("card-header card-chart"),f.attr("style",t.CARD_HEADER_STYLE||i);var v=$("<div></div>");v.addClass("ct-chart"),v.attr("id",c),f.append(v),C.append(f);var h=$("<div></div>");h.addClass("card-content");var g=void 0!=t.CARD_TITLE&&t.CARD_TITLE.length>0?t.CARD_TITLE:"";h.append('<p class="category">'+g+"</p>");var A=void 0!=t.CARD_VALUE&&t.CARD_VALUE.length>0?t.CARD_VALUE:"-";h.append('<h2 class="title">'+A+"</h2>"),C.append(h);var R=$("<div></div>");R.addClass("card-footer");var _=$("<div></div>");if(t.CARD_FOOTER&&(_=$("<div></div>"),_.addClass("stats"),_.append(t.CARD_FOOTER)),R.append(_),C.append(R),p.append(C),t.CARD_LINK){var u=$("<a></a>");u.attr("href",t.CARD_LINK),u.append(p),r.append(u)}else r.append(p);var D;if(t.CARD_CHART_DATA){var O={};if("string"==typeof t.CARD_CHART_DATA)try{O=JSON.parse(t.CARD_CHART_DATA)}catch(l){console.log("Error while try to parse CARD_CHART_DATA"),console.log(l),console.log(t.CARD_CHART_DATA)}else O=t.CARD_CHART_DATA;switch(t.CARD_TYPE.toLowerCase()){case"chart-line":D=new Chartist.Line("#"+c,O,s);break;case"chart-bar":D=new Chartist.Bar("#"+c,O,s);break;case"chart-pie":s.chartPadding={},D=new Chartist.Pie("#"+c,O,s);break;default:console.log("No valid Chart type")}var y=void 0!=t.CARD_ICON_COLOR&&t.CARD_ICON_COLOR.length>0?t.CARD_ICON_COLOR:"white";D.on("draw",function(a){("bar"===a.type||"line"===a.type||"point"===a.type)&&a.element.attr({style:"stroke:  "+y}),("slice"===a.type||"area"===a.type)&&a.element.attr({style:"fill: "+y+"; fill-opacity: "+(a.index%10+2)/10}),$(v).find(".ct-slice-pie").attr("stroke",y),$(v).find(".ct-label").css("color",y),$(v).find(".ct-grid").css("stroke",y),$(v).find(".ct-grid").css("opacity",".4")})}}var i={cardWidth:4,refresh:0},s={},o=$("#"+a);if(o.length>0){var l=v(o);if("string"==typeof t)try{s=JSON.parse(t)}catch(c){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(c),console.log(t),s={}}else s=t;try{s=$.extend(!0,i,s)}catch(c){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(c),s=i,console.log(s)}g();try{apex.jQuery("#"+d).bind("apexrefresh",function(){0==l.children("span").length&&g()})}catch(c){console.log("Can't bind refresh event on "+d+". Apex is missing"),console.log(c)}s.refresh>0&&setInterval(function(){0==l.children("span").length&&g()},1e3*s.refresh)}else console.log("Can't find parentID: "+a)}}}();